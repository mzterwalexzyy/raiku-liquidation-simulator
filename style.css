/* --- Global Styles --- */
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    background-color: #0a0a0a;
    color: #e0e0e0;
    margin: 0;
    padding-top: 60px; /* Space for the fixed nav bar */
}

/* Ensure consistent font on buttons/inputs */
button, input {
    font-family: inherit;
}

/* --- Navigation Bar --- */
#main-nav {
    position: fixed;
    top: 0;
    width: 100%;
    background-color: #0a0a0a;
    border-bottom: 1px solid #2a2a2a;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    z-index: 50;
    height: 60px;
}

.nav-content-wrapper {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    height: 60px;
}

.nav-brand {
    display: flex;
    align-items: center;
}

.logo {
    width: 40px;
    height: auto;
}

.nav-links a {
    color: #e0e0e0;
    text-decoration: none;
    padding: 10px 15px;
    margin: 0 5px;
    font-size: 0.95em;
    transition: color 0.2s, border-bottom 0.2s;
    border-bottom: 2px solid transparent;
}

.nav-links a:hover {
    color: #a6ff00;
}

.nav-links a.active {
    color: #a6ff00;
    border-bottom: 2px solid #a6ff00;
}

/* Wallet Section in Nav */
.wallet-section-nav {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-left: 15px; 
}

.safety-note-nav {
    color: #f5a623;
    font-size: 0.8em;
    display: block; 
}

/* --- Connect Wallet Button Styling (FIXED) --- */
#connectWalletBtn {
    background-color: #4a90e2; /* Blue color for CONNECT */
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s;
    font-size: 0.9em;
}

#connectWalletBtn:hover {
    background-color: #6aabff;
}

/* Disconnect Button (Red) - Applied via JS classList.add('disconnect-btn') */
#connectWalletBtn.disconnect-btn {
    background-color: #d0021b; /* Red color for DISCONNECT */
}

#connectWalletBtn.disconnect-btn:hover {
    background-color: #ff3344;
}

/* --- App Layout --- */
#app-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px 20px 50px 20px;
}

.app-view {
    display: none;
    animation: fadeIn 0.5s;
}

.app-view.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.app-header {
    text-align: center;
    margin-bottom: 40px;
}

.app-header h1 {
    font-size: 2.5em;
    margin-bottom: 10px;
}

.explanation-main {
    color: #bbb;
    font-size: 1.1em;
}

/* --- General Components --- */
.summary-box {
    background-color: #1a1a1a;
    border: 1px solid #3a3a3a;
    padding: 15px;
    margin: 20px auto;
    border-radius: 8px;
    text-align: center;
}

.success-msg {
    border: 1px solid #a6ff00;
    color: #a6ff00;
    background-color: #152500;
    font-weight: bold;
}


/* --- Controls Section (Dashboard) --- */
.controls-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    margin-bottom: 40px;
}

.wallet-status-section {
    text-align: center;
}

.status-indicator {
    color: #d0021b;
    font-weight: bold;
}

.status-indicator.connected {
    color: #7ed321;
}

.simulation-inputs {
    background-color: #1a1a1a;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    text-align: center;
}

.simulation-inputs label {
    display: block;
    margin-bottom: 10px;
    font-size: 0.9em;
    color: #bbb;
}

#liquidationQuantityInput {
    padding: 10px;
    border: 1px solid #3a3a3a;
    border-radius: 5px;
    background-color: #0a0a0a;
    color: #e0e0e0;
    width: 80px;
    text-align: center;
    margin-right: 10px;
}

#runSimulationBtn {
    background-color: #a6ff00;
    color: #0a0a0a;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s;
    margin-top: 15px;
}

#runSimulationBtn:hover:not(:disabled) {
    background-color: #7ed321;
}

#runSimulationBtn:disabled {
    background-color: #3a3a3a;
    color: #777;
    cursor: not-allowed;
}

/* --- Results Grid (Dashboard) --- */
.results-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-top: 30px;
}

.bot-card {
    background-color: #1a1a1a;
    padding: 25px;
    border-radius: 10px;
    text-align: center;
    border: 1px solid #2a2a2a;
}

.standard-bot {
    border: 2px solid #d0021b;
    box-shadow: 0 0 10px rgba(208, 2, 27, 0.3);
}

.raiku-bot {
    border: 2px solid #a6ff00;
    box-shadow: 0 0 10px rgba(166, 255, 0, 0.5);
}

.bot-card h3 {
    margin-top: 0;
    font-size: 1.5em;
}

.stat-box {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px dashed #3a3a3a;
}

.stat-box:last-of-type {
    border-bottom: none;
}

.stat-box .label {
    color: #bbb;
}

.stat-box .value {
    font-weight: bold;
}

.stat-box.success .value {
    color: #7ed321;
}

.stat-box.failed .value,
.stat-box.loss .value {
    color: #d0021b;
}

.stat-box.profit .value {
    color: #a6ff00;
}

.message {
    margin-top: 15px;
    font-style: italic;
    min-height: 20px;
}

/* --- Live Liquidation Pool Cards --- */

/* Card Grid for the positions */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.liq-position-card {
    background-color: #1a1a1a;
    padding: 20px;
    border-radius: 10px;
    border: 2px solid #3a3a3a;
    transition: transform 0.2s, box-shadow 0.2s; /* Add box-shadow transition for animation */
    position: relative;
    overflow: hidden;
}

.liq-position-card:hover {
    transform: translateY(-3px);
}

/* FIX: Center the position number title */
.liq-position-card h3 {
    margin-top: 0;
    font-size: 1.4em;
    border-bottom: 1px solid #2a2a2a;
    padding-bottom: 10px;
    margin-bottom: 15px;
    text-align: center; 
}

.card-stats p {
    display: flex;
    justify-content: space-between;
    margin: 5px 0;
}

.health-low {
    color: #d0021b;
    font-weight: bold;
}

.health-high {
    color: #7ed321;
    font-weight: bold;
}

.profit-value {
    color: #a6ff00;
    font-weight: bold;
}

.status-message {
    text-align: center;
    font-style: italic;
    margin: 15px 0;
    color: #f5a623;
}

/* Card State Styles */
.liq-position-card.vulnerable {
    border: 2px solid #d0021b;
    box-shadow: 0 0 15px rgba(208, 2, 27, 0.4);
}

.liq-position-card.at-risk {
    border: 2px solid #d0021b; 
    box-shadow: 0 0 15px rgba(208, 2, 27, 0.4);
}

/* FIX: Green border for SAFE positions */
.liq-position-card.safe {
    border: 2px solid #a6ff00; 
    box-shadow: 0 0 15px rgba(166, 255, 0, 0.4);
    opacity: 1;
}


/* Liquidation Buttons Layout and Color */
.action-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-top: 15px;
}

/* Ensure two columns are defined for the action buttons */
.action-buttons:has(> .single-action-btn:only-child) {
    grid-template-columns: 1fr; /* This helps collapse the gap for single buttons */
}


.liq-button, .aot-button, .single-action-btn {
    padding: 10px 5px;
    border: none;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s, opacity 0.2s;
    font-size: 0.9em;
    white-space: normal; 
    line-height: 1.2;
}

/* Standard JIT/Liquidation Button (Yellow/Orange Background) */
.standard-liq-btn {
    background-color: #ffc700; 
    color: #000; 
}
.standard-liq-btn:hover:not(:disabled) {
    background-color: #ffda5c;
}

/* Raiku JIT/Liquidation Button (Neon Green Background) */
.raiku-liq-btn {
    background-color: #a6ff00; 
    color: #000; 
}
.raiku-liq-btn:hover:not(:disabled) {
    background-color: #7ed321;
}

/* Raiku AoT Button (DEEP OLIVE/GREEN BACKGROUND - Matches "Schedule Raiku AoT") */
.aot-button {
    background-color: #4a6c2f; 
    color: white; 
}
.aot-button:hover:not(:disabled) {
    background-color: #5d873d;
}

/* Too Early for Standard JIT (Darker Yellow/Orange Background) */
.too-early-btn {
    background-color: #9d7d00; 
    color: white; 
}

/* Position is Safe (FINAL, ROBUST FIX: Full Width and Green Hover) */
.safe-btn {
    /* **THIS IS THE CRITICAL FIX:** Force this element to span all columns */
    grid-column: 1 / -1; 
    
    background-color: #313131; 
    color: #bbb; 
    border: 1px solid #2a2a2a;
}
/* Green hover effect */
.safe-btn:hover {
    background-color: #a6ff00; /* Raiku Green */
    color: #000; /* Black text for contrast */
    cursor: default;
}


/* Disabled/Failure States */
.liq-button:disabled, .aot-button:disabled, .too-early-btn:disabled, .safe-btn:disabled {
    background-color: #3a3a3a !important;
    color: #777 !important;
    cursor: not-allowed;
    opacity: 0.6;
}

/* Feedback Notification */
.feedback-notification {
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    min-height: 18px; 
}

.success-feedback {
    color: #a6ff00;
    font-weight: bold;
}

.fail-feedback {
    color: #d0021b;
    font-weight: bold;
}

/* --- Footer --- */
#about-footer {
    text-align: center;
    padding: 30px 0;
    border-top: 1px solid #2a2a2a;
    margin-top: 50px;
}

#about-footer p {
    font-size: 0.9em;
    color: #bbb;
}

#about-footer a {
    color: #a6ff00;
    text-decoration: none;
}

/* --- Modal Styles (Welcome Screen - FIXED) --- */
.modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.9);
}

.modal-content {
    background-color: #1a1a1a;
    color: #e0e0e0;
    margin: 15% auto; 
    padding: 30px;
    border: 1px solid #a6ff00;
    width: 80%;
    max-width: 500px; 
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    text-align: center;
}

.modal-content h2 {
    color: #a6ff00;
    font-size: 1.8em;
    margin-bottom: 20px;
}

.modal-points {
    background-color: #0a0a0a;
    border-left: 5px solid #a6ff00;
    padding: 15px;
    margin: 20px 0;
    text-align: left;
    border-radius: 5px;
}

.modal-points p {
    margin: 10px 0;
    line-height: 1.4;
    padding-left: 5px;
}

.modal-points strong {
    color: #a6ff00;
}

.modal-close-btn {
    background-color: #a6ff00;
    color: #0a0a0a;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1.1em;
    margin-top: 20px;
}

/* --- Chart/Summary Container --- */
.results-charts-container {
    padding: 30px 0;
    margin-bottom: 30px;
    border-bottom: 1px solid #2a2a2a;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.chart-title {
    color: #a6ff00;
    font-size: 1.6em;
    margin-bottom: 20px;
}

/* --- Mobile Menu Styles (Hamburger) --- */

/* Hide the menu toggle button by default (Desktop view) */
.menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 2em;
    color: #a6ff00; /* Raiku green color */
    cursor: pointer;
    padding: 0 15px;
}

/* Style for the off-canvas menu */
.mobile-menu {
    position: fixed;
    top: 0;
    right: 0;
    width: 250px;
    height: 100%;
    background-color: #0a0a0a; 
    border-left: 1px solid #2a2a2a;
    box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
    transform: translateX(100%); /* Start off-screen */
    transition: transform 0.3s ease-in-out;
    z-index: 1000;
    padding-top: 60px; /* Space for the header */
}

/* State when the menu is active */
.mobile-menu.active {
    transform: translateX(0);
}

.close-menu-btn {
    position: absolute;
    top: 15px;
    right: 25px;
    font-size: 2em;
    background: none;
    border: none;
    color: white;
    cursor: pointer;
}

.mobile-nav-links {
    display: flex;
    flex-direction: column;
    padding: 20px;
}

.mobile-nav-links .nav-link {
    color: #e0e0e0;
    padding: 15px 0;
    border-bottom: 1px solid #1a1a1a;
    text-decoration: none;
    font-size: 1.1em;
}

.mobile-nav-links .nav-link:hover,
.mobile-nav-links .nav-link.active {
    color: #a6ff00;
}


/* --- Media Queries (Mobile View Logic) --- */
@media (max-width: 768px) {
    /* 1. Hide the main desktop links */
    .nav-content-wrapper .nav-links {
        display: none;
    }

    /* 2. Show the hamburger button */
    .menu-toggle {
        display: block;
    }

    /* 3. Adjust the wallet section for space */
    .wallet-section-nav {
        margin-left: 0;
    }
    .safety-note-nav {
        display: none; /* Hide safety note to save space */
    }

    .nav-content-wrapper {
        padding: 0 10px;
    }

    /* Reduce spacing/padding on card grid */
    .card-grid {
        gap: 15px;
    }

    /* Adjust button font size in cards */
    .liq-button, .aot-button {
        font-size: 0.85em; 
        padding: 8px 3px;
    }
}

/* Mobile-Specific Adjustment for Modal */
@media (max-width: 600px) {
    .modal-content {
        width: 90%; 
        margin: 5% auto; 
        padding: 20px;
    }
    
    .modal-content h2 {
        font-size: 1.5em; 
    }
}

/* ======================================================= */
/* ====== FLASH FEEDBACK ANIMATION (Final Request) ======= */
/* ======================================================= */

/* Define the animation for the flash effect */
@keyframes flashBorderRed {
    0% { box-shadow: 0 0 15px rgba(208, 2, 27, 0.4), inset 0 0 0 0 rgba(208, 2, 27, 0.2); border-color: #d0021b; }
    25% { box-shadow: 0 0 25px #d0021b, inset 0 0 10px #d0021b; border-color: #ff3344; }
    100% { box-shadow: 0 0 15px rgba(208, 2, 27, 0.4); border-color: #d0021b; }
}

@keyframes flashBorderGreen {
    0% { box-shadow: 0 0 15px rgba(166, 255, 0, 0.4), inset 0 0 0 0 rgba(166, 255, 0, 0.2); border-color: #a6ff00; }
    25% { box-shadow: 0 0 25px #a6ff00, inset 0 0 10px #a6ff00; border-color: #7ed321; }
    100% { box-shadow: 0 0 15px rgba(166, 255, 0, 0.4); border-color: #a6ff00; }
}

/* Class to be applied temporarily on successful action */
.liq-position-card.flash-success {
    animation: flashBorderGreen 0.5s ease-out;
}

/* Class to be applied temporarily on failed action */
.liq-position-card.flash-fail {
    animation: flashBorderRed 0.5s ease-out;
}